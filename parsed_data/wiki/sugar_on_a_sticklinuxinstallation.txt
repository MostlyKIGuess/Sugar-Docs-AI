Title: Sugar on a Stick/Linux/Installation
URL: https://wiki.sugarlabs.org/go/Sugar_on_a_Stick/Linux/Installation
--------------------------------------------------------------------------------
These are the steps for installing Sugar on a Stick on a USB/SD device.
This page is transcluded to various installation instruction pages.
Download
the latest
Sugar on a Stick
.iso file.
Prepare
: (with
root
user
permissions at a terminal or
console
command line)
Create a mount point directory:
mkdir /run/soas
Mount the .iso file to make it accessible as a disk:
mount
/path/to/downloaded
.iso /run/soas/
(Where
/path/to/downloaded
.iso is the
filesystem
path, or fully specified name,
of the downloaded .iso file.)
This is the source for the installation, and must remain
mounted
until the installation is complete.
Insert a USB stick of 2 GB or greater capacity into your computer.
With
root
user
permissions at a terminal or
console
command line, use the command
sudo df -Th
or
sudo blkid
to get the USB device node name.
(Items in angle brackets, such as <MyAccount> are descriptive placeholders.)
You should see something like the following:
[<user>@<system> <working directory>]$ sudo df -Th
Filesystem     Type      Size  Used Avail Use% Mounted on
devtmpfs       devtmpfs   16G     0   16G   0% /dev
tmpfs          tmpfs      16G   33M   16G   1% /dev/shm
tmpfs          tmpfs      16G  1.8M   16G   1% /run
tmpfs          tmpfs      16G     0   16G   0% /sys/fs/cgroup
/dev/sda1      ext4      123G   17G  100G  15% /
tmpfs          tmpfs      16G   80K   16G   1% /tmp
tmpfs          tmpfs     3.2G   10M  3.2G   1% /run/user/1000
/dev/sdb1      vfat      233G   90G  143G  39% /run/media/<MyAccount>/<filesystem label>
/dev/loop0     iso9660   942M  942M     0 100% /run/soas
(The
/run/media/<MyAccount>/
path is the standard mount point for removable media.
/media/<MyMountPoint>
is common on other operating systems.)
[<user>@<system> <working directory>]$ sudo blkid
/dev/sda1: LABEL="Fedora30" UUID="dddf4ae0-e1fd-43c3-bacc-91acbafb3a34" TYPE="ext4" PARTUUID="000b2340-03"
/dev/sdb1: LABEL_FATBOOT="Fat" LABEL="Fat" UUID="D082-05E1" TYPE="vfat" PARTLABEL="Fat" PARTUUID="53132329-808c-4a44-adf6-e98ad17546ff"
/dev/loop0: UUID="2019-04-26-02-18-05-00" LABEL="Fedora-SoaS-Live-30-1-2" TYPE="iso9660" PTUUID="37f2045d" PTTYPE="dos"
(Additional disk drive partitions may be listed on your computer.)
The mount point (Mounted on), Filesystem, Size, and LABEL should help you identify what you want.
Unmount the USB device filesystem:
umount /run/media/<MyAccount>/<MyUSBdiscMountPoint>
(The
/run/media/<MyAccount>/
path is the standard mount point. Other operating systems may use
/media/<MyMountPoint>
.)
(You should have the isomd5sum package installed so that the following installation script can verify the download.)
Load
: Execute the following installation command, as the
root
user
, in
one
command line with many options:
/run/soas/LiveOS/livecd-iso-to-disk --reset-mbr --overlay-size-mb
500
--home-size-mb
500
--unencrypted-home
/path/to/downloaded
.iso /dev/sd
?
1
The '
?
' in the final parameter represents the target USB device
s
csi
d
rive
node, such as
sd
b
1
or
sd
c
1
, etc., and
/path/to/downloaded
.iso
is the location and name of the .iso file.
The operating system will occupy ~960 MB, and the overlay and home size arguments,
500
and
500
, were selected to fit in a 2 GB device. These may be adjusted depending on your preferences and device capacity (see
LiveOS image
). On a 4 GB device, one might use
1000
and
1600
for the size arguments.
The installation transcript should look something like the following:
[<user>@<system> <working directory>]$ sudo /run/soas/LiveOS/livecd-iso-to-disk --reset-mbr --overlay-size-mb 500 --home-size-mb 500 --unencrypted-home /<path to>/Fedora-SoaS-Live-x86_64-30-1.2.iso /dev/sdc1
Verifying image...
/<path to>/Fedora-SoaS-Live-x86_64-30-1.2.iso:   bac65eaf45ad370f6e9ddf793f436e33
Fragment sums: 82358a8de12fab19be3e83c22431837827fbe4b8be6d9be46695f853676f
Fragment count: 20
Supported ISO: no
Press [Esc] to abort check.
Checking: 100.0%

The media check is complete, the result is: PASS.

It is OK to use this media.

Copying LiveOS image to target device...
squashfs.img
    887,312,384 100%  379.28MB/s    0:00:02 (xfr#1, to-chk=0/1)

Syncing filesystem writes to disc.
    Please wait, this may take a while...
Setting up /EFI/BOOT
Updating boot config files.
Initializing persistent overlay...
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 0.354372 s, 1.5 GB/s
Initializing persistent /home
500+0 records in
500+0 records out
524288000 bytes (524 MB, 500 MiB) copied, 0.346354 s, 1.5 GB/s
Formatting unencrypted home.img
mke2fs 1.44.6 (5-Mar-2019)
Creating filesystem with 512000 1k blocks and 128016 inodes
Filesystem UUID: b32a4987-627e-4131-a863-7f6c9bcc2178
Superblock backups stored on blocks: 
	8193, 24577, 40961, 57345, 73729, 204801, 221185, 401409

Allocating group tables: done                            
Writing inode tables: done                            
Creating journal (8192 blocks): done
Writing superblocks and filesystem accounting information: done 

tune2fs 1.44.6 (5-Mar-2019)
Setting maximal mount count to -1
Setting interval between checks to 0 seconds
Installing boot loader...
Target device is now set up with a Live image!
Boot
: Insert the USB stick into a bootable USB port on your computer. Set the option to "boot from USB" in your computer's
BIOS
setup, and then start up the computer.
To create more Sugar Sticks on other 2 GB or greater USB or SD devices, while running
Sugar on a Stick
, one may run the
Terminal Activity
, and execute this command as the root user:
livecd-iso-to-disk --reset-mbr --overlay-size-mb
500
--home-size-mb
500
--delete-home --unencrypted-home /run/initramfs/livedev /dev/sd
?
1
Replace
/dev/sd
?
1
with a new device node for the second USB/SD device that you want to load with
Sugar on a Stick
.