Title: Machine/elsalvador
URL: https://wiki.sugarlabs.org/go/Machine/elsalvador
--------------------------------------------------------------------------------
Data
Name
elsalvador.treehouse.su
Description
Development VM for
OpenQwaq
OS
Debian
Squeeze
Typ
Virtual Machine
Location
housetree
Service
template_SERVICE
Admins
Stefan Unterhauser
,
Ignacio Rodr√≠guez
Monitoring
munin
Recipe
ssh root@squeeze 'aptitude update'
 ssh root@squeeze 'aptitude safe-upgrade'
 ssh root@housetree 'qemu-img create -f qcow2 /srv/vm/elsalvador.qcow2 20G'
 ssh root@squeeze 'rm /etc/udev/rules.d/70-persistent-net.rules'
 ssh root@squeeze 'sed -i "s/squeeze/elsalvador/" /etc/dhcp/dhclient.conf; sync'
 ssh root@housetree 'virsh suspend template-squeeze'
 ssh root@housetree 'virt-clone --force -o template-squeeze -f /srv/vm/elsalvador.qcow2 -n elsalvador'
 ssh root@housetree 'virsh resume template-squeeze'
 ssh root@squeeze 'sed -i "s/elsalvador/squeeze/" /etc/dhcp/dhclient.conf'
 ssh root@housetree 'virsh start elsalvador'
add "elsalvador" to .ssh/config and to treehouse-DNS
ssh root@elsalvador 'sed -i "s/squeeze/elsalvador/g" /etc/hostname /etc/mailname /etc/hosts /etc/postfix/main.cf'
 ssh root@elsalvador 'ssh-keygen -N "" -f /etc/ssh/ssh_host_rsa_key -t rsa'
 ssh-keygen -f ".ssh/known_hosts" -R elsalvador.treehouse.su
 ssh root@elsalvador 'ssh-keygen -N "" -f /etc/ssh/ssh_host_dsa_key -t dsa'
 ssh root@elsalvador 'ssh-keygen -N "" -f /root/.ssh/id_rsa -t rsa'
 ssh root@munin 'sed "s/squeeze/elsalvador/" </etc/munin/munin-conf.d/squeeze >/etc/munin/munin-conf.d/elsalvador'
 ssh root@elsalvador 'reboot'
ssh root@munin 'sed "s/squeeze/munin/" </etc/munin/munin-conf.d/squeeze >/etc/munin/munin-conf.d/munin' #recursion :P
user "replaceafill" name "" other ""
ssh root@elsalvador 'adduser --disabled-password --add_extra_groups replaceafill'
 ssh root@elsalvador 'echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDb0csp728LiEiWeFfZjzxBnNDfNsPUnM05y3OPtGuBv70nOK4OLe7aG2qYeCpWhRmJ5Gaan/ghnB9Pp9sT++JhEDl7X4wZin1pC60q3dGStVfmiKcQ1AEmXll0gtm+n16w9I0eyLSwGIafT3Ar6ljcgXzhHsXhlHM4b67PIxKGAHya0A6MLaY7p3dWRsIhYI/qjTu6pczGiAdxdQmwoYlsNAteCokAg96XVUQ71aOq+BKrr5AIc4oL6fKGV6WdG2gZphVc6XBALFnCcKK1zjojwJF9Lle0Irzz97PZcImYCNh15XiPTEMVKr/TkDHMVkxHYpS8aLJJosF4o9JrJdpvb0UX/Kolwkt5jynVZ9L8msvS9rpMdqQEfFS+9rCGXeQlZcJZnOxb3j0yjBFiMXI0NlZ2QhUT7mk+vq/6MW+vwxwAHTPltc7x7UbSAsugoObXfWjr0PzfAoFZfu9Dz0I4KTgranah48PxsAE4JAkVybqaoHBMfM7KOx7D7vp1VFMFv44nBxopTrO38JV9KRraKlvsaywPxwr6qoi8RgbPlU3r/IjNczfre8rZU2qOsaDf92mNaUALvxiwzMsRsDKYt7CzFvqa56TKpL9QWMJCXKZ43A3vi39OEy4SYOaf1eNMNVGqKzTUSmxucbjXfgdJHcNEIb8LTSB83o25thkPkQ== launchpad" >> /home/replaceafill/.ssh/authorized_keys' >> /home/replaceafill/.ssh/authorized_keys'
user "hharriola" name "" other ""
ssh root@elsalvador 'adduser --disabled-password --add_extra_groups hharriola'
 ssh root@elsalvador 'echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDPcSUuXhLKxAfe2vIr6gD+KbdJEmZX4mDOq6XOPuG2thHz3dTLzHNUPl2B+c6l92QJNVmx94MnLf5+JcUYbNRAe/S0lXqS5SesqqlWKV848HMQgWpNhbxRfQ3GdnMjDnrbx9ZUxXODOuxwwl8Nn/FDHKlGSCovWNNMDOBtk4CAquGWWEor7gktGhADplmtVUCvNhUK7jjWurc5VNYLskJKmfVzruYRdjJv4g9dhbLYGmsD7l9gJSS4YEuiNAvx/cWR92xTRVuSmcTgF0j+7cJ8D8AHAXfkPoU94RJ7Sn1o8t3E3lcRucRWoB3ZVN5z9SSaGnBg2YAqQZUvsORZ1Kk5 hharriola@arriola-srv" >> /home/hharriola/.ssh/authorized_keys'